CREATE DATABASE sporting_manager;

USE sporting_manager;

CREATE TABLE CLIENTS (LOGIN VARCHAR(16) NOT NULL, PASSWD VARCHAR(64) NOT NULL, NAME VARCHAR(16) NOT NULL, SURNAME VARCHAR(16) NOT NULL, ADDRESS VARCHAR(16) NOT NULL, PHONE VARCHAR(16) NOT NULL, PRIMARY KEY (LOGIN));
CREATE TABLE PAVILLIONS (PAVILLION VARCHAR(32) NOT NULL, LOCATION VARCHAR(16), PRIMARY KEY (PAVILLION));
CREATE TABLE ACTIVITIES (ID INT UNSIGNED NOT NULL AUTO_INCREMENT, NAME VARCHAR(32), DESCRIPTION VARCHAR(32), START_DATE VARCHAR(16), COST FLOAT, PAVILLION_NAME VARCHAR(32) NOT NULL, TOTAL_PLACES INT UNSIGNED NOT NULL, OCCUPIED_PLACES INT UNSIGNED NOT NULL, PRIMARY KEY (ID), FOREIGN KEY (PAVILLION_NAME) REFERENCES PAVILLIONS(PAVILLION));
CREATE TABLE SUBSCRIPTIONS (CLIENT_LOGIN VARCHAR(16) NOT NULL, ACTIVITY_ID INT UNSIGNED NOT NULL, PRIMARY KEY (CLIENT_LOGIN, ACTIVITY_ID), FOREIGN KEY (CLIENT_LOGIN) REFERENCES CLIENTS(LOGIN), FOREIGN KEY (ACTIVITY_ID) REFERENCES ACTIVITIES(ID));

INSERT INTO CLIENTS VALUES ('josema', 'aaa', 'José Manuel', 'García Núñez', 'uiop', '67890');
INSERT INTO CLIENTS VALUES ('juanma', 'aaa', 'Juan Manuel', 'Espinosa Moral', 'qwerty', '12345');

INSERT INTO PAVILLIONS VALUES ('Ignacio Pinedo','Getafe');
INSERT INTO PAVILLIONS VALUES ('Alfredo Di Stefano','Leganes');
INSERT INTO PAVILLIONS VALUES ('Polideportivo exterior','Colmenarejo');

INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('swimming','classes for beginners','12 June','80','Ignacio Pinedo', '20', '7');
INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('fitness','advanced fitness','17 June','32','Alfredo Di Stefano', '50', '50');
INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('aerobic','advanced aerobic','3 June','40','Alfredo Di Stefano', '50', '48');
INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('dual bike','competition','7 July','10','Alfredo Di Stefano', '25', '25');
INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('tennis','National instructors','1 Sept','40','Ignacio Pinedo', '8', '7');
INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('athletims','trainnning','12 June','0','Polideportivo exterior', '60', '32');
INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('taichi','classes for beginners','2 Oct','60','Alfredo Di Stefano', '15', '0');
INSERT INTO ACTIVITIES (NAME, DESCRIPTION, START_DATE, COST, PAVILLION_NAME, TOTAL_PLACES, OCCUPIED_PLACES) VALUES ('Kick Boxing','Contact sport','24 June','176','Ignacio Pinedo', '105', '1');